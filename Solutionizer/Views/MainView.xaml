<Window x:Class="Solutionizer.Views.MainView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:extToolkit="clr-namespace:Microsoft.Windows.Controls;assembly=WPFToolkit.Extended"
             xmlns:ViewModels="clr-namespace:Solutionizer.ViewModels"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:cmd="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Extras.WPF4"
             xmlns:Converters="clr-namespace:Solutionizer.Converters"
             xmlns:Views="clr-namespace:Solutionizer.Views"
             mc:Ignorable="d" 
             d:DataContext="{d:DesignInstance ViewModels:MainViewModel}"
             d:DesignHeight="300" d:DesignWidth="300"
                TextOptions.TextFormattingMode="Display"
        TextOptions.TextHintingMode="Fixed"
        UseLayoutRounding="True"
        SnapsToDevicePixels="true"        
        Title="Solutionizer" Height="350" Width="525">
  <i:Interaction.Triggers>
    <i:EventTrigger EventName="Loaded">
      <cmd:EventToCommand Command="{Binding OnLoadedCommand, Mode=OneWay}" />
    </i:EventTrigger>
  </i:Interaction.Triggers>
  <Grid>
    <Grid.Resources>

    </Grid.Resources>
    <extToolkit:BusyIndicator IsBusy="{Binding IsBusy}" BusyContent="{Binding BusyMessage}">
      <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="auto"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="auto"/>
          <ColumnDefinition Width="2*"/>
        </Grid.ColumnDefinitions>

        <Grid Margin="3 3 0 3">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="auto"/>
          </Grid.ColumnDefinitions>
          <TextBox IsReadOnly="true" Text="{Binding ProjectShelf.RootPath}"  />
          <Button Grid.Column="1" Command="{Binding SelectRootPathCommand}" Margin="3 0 0 0">
            <Image Height="16" Width="16" Source="{Converters:Shell32Icon FileName='shell32.dll',IconIndex=3}" />
          </Button>
        </Grid>

                <Views:ProjectShelfView Grid.Row="1" DataContext="{Binding ProjectShelf}" />

                <GridSplitter Grid.Column="1" Grid.RowSpan="2" VerticalAlignment="Stretch" HorizontalAlignment="Center" ShowsPreview="true" Width="6" Background="Transparent"/>
        
        <WrapPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0 3 3 3">
          <Button Content="Launch" Command="{Binding LaunchCommand}" Margin="3 0 0 0"/>
          <Button Content="Save" Command="{Binding SaveCommand}" Margin="3 0 0 0"/>
        </WrapPanel>

        <Views:SolutionView Grid.Column="2" Grid.Row="1" Margin="0 3 3 3" DataContext="{Binding Solution}" />

      </Grid>
    </extToolkit:BusyIndicator>
  </Grid>
</Window>
